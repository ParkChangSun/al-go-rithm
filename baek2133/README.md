# 타일 채우기

https://www.acmicpc.net/problem/2133

3×N 크기의 벽을 2×1, 1×2 크기의 타일로 채우는 경우의 수를 구해보자.

# 내 풀이

점화식 구하는 것이 정말 어려웠다. 100% 내 풀이라고는 할 수 없지만, 스스로 식을 도출할 수는 있었다.

# 풀이

T(N) = N칸 벽의 경우의 수

대강 알 수 있는 것들은

- 1X1이 생기는 배치는 불가능하다.
- 각 2칸에는 반드시 하나의 타일이 가로로 배치되어야 한다. 따라서, N이 홀수인 경우는 배치가 불가능하다.
- T(2) = 3
- T(4) = T(2) * T(2) + 2
    - 각각의 2칸을 독립적으로 배치한다.
    - (위 또는 아래에 가로로 2개가 배치된 상태의) 특수한 형태의 2가지는 양 끝 타일을 세로로 배치하고 나머지 모든 타일들을 가로로 배치한다.
- T(N) = T(N-2) * T(2) 기반의 규칙을 따를 것이다.

여기까지는 직관적으로 알 수 있었다. 하지만 N칸 벽은 단순한 곱하기 이외에도 뭔가가 더 있어야 할 것 같다는 것도 알 수 있었다. 그래서 찾아봤지만 전혀 이해가 되지 않았다. 결국 직접 그려서 알아냈다.

- T(N-2) * T(2) N칸 벽의 오른쪽에 2칸 벽을 이어붙이는 형태로 벽을 확장시킬 수 있다.
- 그리고 N칸 벽은 양 끝 타일이 세로로 배치된 2가지의 특수한 형태를 가진다. 이는 위에서 4칸 벽의 경우의 수를 세는 것과 동일하다.
- 방금 확장한 2칸이 특수한 형태를 띄면서, 즉 오른쪽 끝 타일이 세로로 배치된 형태이면서, 왼쪽 끝 타일을 오른쪽으로 2칸씩 이동시킬 수 있다. 왜냐하면 오른쪽이 특수한 형태를 띠는 경우를 세지 않았기 때문이다.
    - 2칸 옮겼다면 왼쪽에 2칸 벽을 자유롭게 배치할 수 있다. 그 왼쪽은 N-2칸 벽의 특수한 형태 2가지만 따진다. T(2) * 2
    - 4칸 옮겼다면 왼쪽에 4칸 벽을 자유롭게 배치할 수 있다. 그 왼쪽은 N-4칸 벽의 특수한 형태 2가지만 따진다. T(4) * 2
    - 이런 식으로 오른쪽이 특수한 형태를 띠는 가장 작은 단위인 4칸이 될 때까지 경우의 수를 센다. 옮기지 않은 원래의 특수한 형태 또한 T(0) * 2 로 생각할 수 있다.
        - $\sum_{j=0}^{N-4}2T(j)$ ($j$ is even)
- 한쪽 끝 타일만 세로로 배치할 수는 없다. 벽은 무조건 짝수 길이를 가지기 때문이다.

따라서 점화식은 다음과 같다.

$T(N) = T(N-2)T(2) + \sum_{j=0}^{N-4}2T(j)$ ($N, j$ is even)

## 구현
```go
memo[0] = 1
memo[2] = 3
for i := 4; i <= n; i += 2 {
    acc := 0
    for j := 0; j <= i-4; j += 2 {
        acc += 2 * memo[j]
    }
    memo[i] = 3*memo[i-2] + acc
}
fmt.Fprintln(std, memo[n])
```

## 에러

없음

# 메모

질문 게시판을 보니까 점화식을 잘 세우는 팁은 이런 문제를 많이 접해보는 것 밖에 없다고 한다. 점화식을 못 세우는 것에 대해 너무 조급해할 필요는 없을 것 같다.