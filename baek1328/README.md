# 고층 빌딩

https://www.acmicpc.net/problem/1328

# 풀이

## 문제 분할

빌딩이 하나도 없는 상태에서 시작해 빌딩을 하나씩 배치한다.

빌딩을 배치하는 방법은 지금 있는 빌딩 중 가장 긴 빌딩보다 더 긴 빌딩을 배치하거나, 지금 있는 빌딩 중 가장 짧은 빌딩보다 더 짧은 빌딩을 배치하는 것이다.

## 긴 빌딩을 배치

가장 긴 빌딩을 빌딩 사이에 배치하면 양 쪽에서 보이는 빌딩이 1개씩 늘어난다.

하지만 양 쪽 끝에 배치하는 경우 그 쪽에서 보이는 빌딩은 1이 된다.

가능한 한 가지 방법은 양 쪽을 나누어 계산하는 것이다. 긴 빌딩 뒤에 가린 빌딩들의 순서는 상관이 없다.

아직까지 이 점화식을 구하지도, 설명을 찾지도 못했다. 식은 굉장히 복잡하다.

## 짧은 빌딩을 배치

지금 배치하는 빌딩은 가장 짧기 때문에 양쪽 끝에 배치하지 않는 이상 양 끝에서 보이지 않는다.

n-1개의 빌딩들 사이에 배치할 수 있는 자리는 n-2개이다.

$f(n-1,l,r)*(n-2)$

가장 짧은 빌딩을 양쪽 끝 중 한 곳에 배치할 경우, 그 쪽에서 보이는 빌딩이 하나 늘어난다.

n-1개의 빌딩들 양 끝에 배치할 수 있는 자리는 2개이다.

$f(n-1,l-1,r)+f(n-1,l,r-1)$

두 경우를 합치면 가장 짧은 빌딩을 배치할 수 있는 모든 곳에 배치할 수 있게 된다.

$f(n,l,r)=f(n-1,l,r)*(n-2)+f(n-1,l-1,r)+f(n-1,l,r-1)$

n,l,r에 대한 3차원 메모가 필요하다.

# 내가 틀린 부분

처음 수열을 만들어 볼 때 가장 긴 것에 따라 보이는 수가 다르다는 것에만 집중했다. 그래서 꼭 큰 것을 넣는 방식만 생각하게 됐다.

생각의 과정을 먼저 문장으로 대강 나타내 본 다음 생각해 봤다면 발상의 전환을 할 수 있었을지도 모른다.

또한 수열 같은 것을 만들 때 꼭 '앞에서'부터 만든다고 생각했었는데, 이 문제는 수열의 중간에 '끼워넣는' 방식으로 만든다.

# 메모

없음